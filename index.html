<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>循环海报轮播</title>
  <link rel="stylesheet" href="styles.css">
<style>
  body {
  margin: 0;
  font-family: Arial, sans-serif;
  background-color: #f4f4f4;
}

.carousel-container {
  position: relative;
  width: 100%;
  overflow: hidden;
}

.carousel {
  display: flex;
  gap: 20px;
  transition: transform 0.5s ease-in-out;
}

.poster {
  display: flex;
  flex-direction: row;
  align-items: center;
  background: white;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  border-radius: 10px;
  overflow: hidden;
}

.poster-image {
  width: 200px;
  height: auto;
  cursor: pointer;
}

.info {
  padding: 20px;
}

.info h3 {
  margin: 0 0 10px;
}

.trailer-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.trailer-overlay.hidden {
  display: none;
}

.trailer iframe {
  width: 80%;
  height: 80%;
}

.hidden {
  display: none;
}
</style>
</head>
<body>
  <div class="carousel-container">
    <div class="carousel">
      <!-- 示例海报层 -->
      <div class="poster">
        <img src="poster1.jpg" alt="电影海报1" class="poster-image" />
        <div class="info">
          <h3>电影标题1</h3>
          <p>电影简介1</p>
        </div>
      </div>
      <div class="poster">
        <img src="poster2.jpg" alt="电影海报2" class="poster-image" />
        <div class="info">
          <h3>电影标题2</h3>
          <p>电影简介2</p>
        </div>
      </div>
      <!-- 可以添加更多海报 -->
    </div>
  </div>

  <!-- 弹出预告片 -->
  <div class="trailer-overlay hidden">
    <div class="trailer">
      <iframe src="" frameborder="0" allowfullscreen></iframe>
    </div>
  </div>

  <script src="scripts.js"></script>
<script>
  const carousel = document.querySelector('.carousel');
const posters = document.querySelectorAll('.poster');
const overlay = document.querySelector('.trailer-overlay');
const iframe = overlay.querySelector('iframe');

let currentIndex = 0;

// 自动循环滚动
function autoScroll() {
  currentIndex++;
  if (currentIndex >= posters.length) currentIndex = 0;
  updateCarousel();
}

function updateCarousel() {
  const offset = -(currentIndex * (posters[0].offsetWidth + 20)); // 每层宽度+间隙
  carousel.style.transform = `translateX(${offset}px)`;
}

// 事件监听：点击海报弹出预告片
posters.forEach((poster, index) => {
  poster.querySelector('.poster-image').addEventListener('click', () => {
    iframe.src = `trailer${index + 1}.mp4`; // 示例预告片路径
    overlay.classList.remove('hidden');
  });
});

// 关闭预告片
overlay.addEventListener('click', (e) => {
  if (e.target === overlay) {
    overlay.classList.add('hidden');
    iframe.src = '';
  }
});

// 支持手动滑动
let startX = 0;
let isDragging = false;

carousel.addEventListener('mousedown', (e) => {
  isDragging = true;
  startX = e.pageX;
});

carousel.addEventListener('mousemove', (e) => {
  if (!isDragging) return;
  const move = e.pageX - startX;
  carousel.style.transform = `translateX(${move}px)`;
});

carousel.addEventListener('mouseup', () => {
  isDragging = false;
});

// 自动循环
setInterval(autoScroll, 3000);
</script>
</body>
</html>
