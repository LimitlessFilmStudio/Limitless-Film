<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>电影海报居中显示</title>
  <style>
    /* 页面整体居中 */
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      min-height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
      background: #000;
      color: #fff;
      overflow-x: hidden;
    }
    /* 使海报页面居中显示并增加错位空隙 */
.carousel {
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  width: 100%;
  height: 300px;
  overflow: hidden;
  margin: auto;
  box-sizing: border-box;
}

/* 单个海报样式 */
.movie-poster {
  flex: 0 0 25%;
  height: 80%; /* 调整高度让间距更明显 */
  margin: 0 10px; /* 增加海报之间的空隙 */
  background-size: cover;
  background-position: center;
  border-radius: 10px; /* 增加圆角 */
  box-shadow: 0 8px 15px rgba(0, 0, 0, 0.5); /* 增加阴影效果 */
  transition: transform 1s ease-in-out;
}

/* 当前海报放大效果（可选，增强视觉表现） */
.movie-poster.active {
  transform: scale(1.05); /* 当前显示的海报稍微放大 */
  z-index: 1;
}

/* 滑动线容器 */
.navigation-dots {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 20px;
}

.dot {
  width: 12px;
  height: 12px;
  margin: 0 5px;
  background: #666;
  border-radius: 50%;
  cursor: pointer;
  transition: background 0.3s ease;
}

.dot.active {
  background: #fff;
}

/* 模态框样式 */
#modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  backdrop-filter: blur(10px);
  z-index: 10;
  display: none;
}

.modal-content {
  position: relative;
  width: 80%;
  height: 80%;
  background: #000;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
  border-radius: 10px;
}

#trailer {
  width: 100%;
  height: 100%;
  border-radius: 10px;
}

#close-modal {
  position: absolute;
  top: 10px;
  right: 10px;
  background: #fff;
  border: none;
  padding: 5px 10px;
  cursor: pointer;
  font-size: 16px;
}

/* 响应式设计 */
@media (max-width: 768px) {
  .movie-poster {
    flex: 0 0 50%;
    margin: 0 5px;
  }

  .modal-content {
    width: 90%;
    height: 50%;
  }
}
</style>
</head>
<body>
  <div class="carousel">
    <div class="movie-poster" style="background-image: url('poster1.jpg')" data-trailer="trailer1.mp4"></div>
    <div class="movie-poster" style="background-image: url('poster2.jpg')" data-trailer="trailer2.mp4"></div>
    <div class="movie-poster" style="background-image: url('poster3.jpg')" data-trailer="trailer3.mp4"></div>
    <div class="movie-poster" style="background-image: url('poster4.jpg')" data-trailer="trailer4.mp4"></div>
  </div>
  <div class="navigation-dots">
    <span class="dot" data-index="0"></span>
    <span class="dot" data-index="1"></span>
    <span class="dot" data-index="2"></span>
    <span class="dot" data-index="3"></span>
  </div>
  <div id="modal">
    <div class="modal-content">
      <video id="trailer" controls autoplay></video>
      <button id="close-modal">关闭</button>
    </div>
  </div>
  <script>
    const carousel = document.querySelector('.carousel');
    const posters = document.querySelectorAll('.movie-poster');
    const dots = document.querySelectorAll('.dot');
    const modal = document.getElementById('modal');
    const video = document.getElementById('trailer');
    const closeModal = document.getElementById('close-modal');

    let offset = 0;
    let autoSlideInterval;

    function moveCarousel(index = null) {
  if (index !== null) {
    offset = index;
  } else {
    offset = (offset + 1) % posters.length;
  }

  posters.forEach((poster, idx) => {
    poster.style.transform = `translateX(-${offset * 100}%)`;
    if (idx === offset) {
      poster.classList.add('active'); // 当前海报添加 `active` 类
    } else {
      poster.classList.remove('active'); // 其他海报移除 `active` 类
    }
  });

  updateActiveDot();
}

    function updateActiveDot() {
      dots.forEach((dot, idx) => {
        if (idx === offset) {
          dot.classList.add('active');
        } else {
          dot.classList.remove('active');
        }
      });
    }

    function startAutoSlide() {
      autoSlideInterval = setInterval(() => {
        moveCarousel();
      }, 3000);
    }

    function stopAutoSlide() {
      clearInterval(autoSlideInterval);
    }

    dots.forEach((dot) => {
      dot.addEventListener('click', (event) => {
        const index = parseInt(event.target.dataset.index);
        stopAutoSlide();
        moveCarousel(index);
        startAutoSlide();
      });
    });

    function showModal(trailerUrl) {
      video.src = trailerUrl;
      modal.style.display = 'flex';
    }

    function closeModalHandler() {
      modal.style.display = 'none';
      video.pause();
      video.src = '';
    }

    modal.addEventListener('click', (event) => {
      if (event.target === modal) {
        closeModalHandler();
      }
    });

    closeModal.addEventListener('click', closeModalHandler);

    posters.forEach((poster) => {
      poster.addEventListener('click', () => {
        const trailer = poster.dataset.trailer;
        showModal(trailer);
      });
    });

    moveCarousel(0);
    startAutoSlide();
  </script>
</body>
</html>
